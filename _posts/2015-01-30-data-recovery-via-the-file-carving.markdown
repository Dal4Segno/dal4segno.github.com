---
layout: post 
title: 파일 카빙을 통한 데이터 복구
date: 2015-01-30 22:25:42
tag: digitalforensics filecarving datarecovery
---
##파일(File)##
파일은 각종 컴퓨터 프로그램 등에서 사용하기 위한 데이터로서, 저장장치에 기록되어 사용된다. 종이 문서로 이루어진 '파일'과 같은 비슷한 역할이다.
##파일 시스템(File System)##
파일이 저장장치에 기록되어 있어도, 저장장치의 어느 위치에 저장되어 있는지 모른다면 해당 파일을 사용할 수 없을 것이다. 이런 일을 막기 위하여 각 저장장치에는 저장장치 내의 모든 파일들을 관리하는 **파일 시스템**이라는 것을 둔다.

파일 시스템은 각 파일들이 어디에 저장되어 있는지 기록하여, 운영체제나 여러 프로그램들이 저장장치에 기록되어 있는 파일들을 원활하게 사용할 수 있게 한다. 또한, 생성/수정/접근 시간 등의 다양한 정보를 기록한다. 이렇게 파일을 위한 정보들은 **메타 데이터(Meta Data)**라 한다.
##할당(Allocation)
파일 시스템이 각 파일이 어디에 저장되어 있는지 기록한다고 했는데, 이는 정확하게 말하면 파일 시스템이 해당 파일에게 저장 장치의 일정 영역을 **할당**하는 것이다. 이렇게 파일에게 할당된 영역은, 다른 파일들이 사용할 수 없다.
##파일 삭제##
파일을 삭제한다고 하면 파일의 데이터를 모두 제거한다고 생각하지만, 대부분의 파일 시스템에서는 그렇지 않다. 보통 파일에 할당된 영역을 할당 해제하여 다른 파일들이 사용할 수 있는 상태로 만들고, 해당 파일의 메타 데이터를 사용하지 않는 것으로 파일을 삭제한다.

모든 데이터를 삭제하지 않는 이유는 컴퓨터 내의 여러 장치에서 저장장치가 가장 느리기 때문에, 저장장치의 사용을 최대한 줄여야 컴퓨터의 전반적인 처리 속도를 높일 수 있다.
##파일 복구(Recover)##
위에서 설명한 대로 파일이 삭제되어도 데이터와 메타 데이터는 남아있기 때문에, 데이터가 다른 파일로 덮여쓰여지지 않았다면, 메타 데이터에 기록되어 있는 할당 영역을 살펴보면 어렵지 않게 파일을 복구해낼 수 있다.
##파일 카빙(Carving)##
하지만 메타 데이터 또한 다른 메타 데이터에 의해 덮여씌어질 수 있고, 모종의 이유로 손상/변조될 수 있다. 이런 경우에는 메타 데이터의 도움을 받지 못하기 때문에 분석가가 직접 저장장치에서 원하는 파일을 찾아내야 한다.
##파일 구조##
###시그니처(Signiture)###
여러 프로그램 등에서, 파일을 쉽게 구분하기 위해서 대부분의 파일은 데이터의 여러 위치에 **시그니처**를 새겨 놓는다. 일반적으로 데이터의 가장 앞에 있는 시그니처를 **헤더(Header)**, 마지막에 있는 시그니처를 **푸터(Footer) 혹은 트레일러(Trailer) 시그니처**라 한다.

파일의 구분 뿐만 아니라, 파일의 처리를 위해서 데이터를 여러 영역으로 구분하여 기록하는 경우도 있는데, 이런 경우에는 영역마다 시그니처가 붙어있는 경우도 있다.

![JPEG File Header]({{site.url}}/image/jpeg_header.png "JPEG 파일의 시그니처")
##참고 자료##
[Wikipedia, English. Computer file](http://en.wikipedia.org/wiki/Computer_file)